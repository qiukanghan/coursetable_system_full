import{_ as e,r as s,o as a,a as l,c as t,w as o,b as u,d,e as n,n as c,s as r,f as p,i,g as m,I as f,h as v,j as _}from"./index-BYGVDGSr.js";import{r as g,_ as I}from"./uni-popup.p_DJac7v.js";const w=e({__name:"index",setup(e){const w=s(null),h=s({studentId:"",password:""});return a((()=>{setTimeout((()=>{w.value.open("center")}),300)})),(e,s)=>{const a=i,V=m,b=f,k=v,x=_,y=g(l("uni-popup"),I);return u(),t(y,{ref_key:"popup",ref:w,type:"center","is-mask-click":!1},{default:o((()=>[d(a,{class:"container"},{default:o((()=>[d(a,{class:"logo"},{default:o((()=>[n("登录系统")])),_:1}),d(x,{class:"login-form"},{default:o((()=>[d(a,{class:"form-group"},{default:o((()=>[d(V,null,{default:o((()=>[n("用户名：")])),_:1}),d(b,{type:"text",modelValue:h.value.studentId,"onUpdate:modelValue":s[0]||(s[0]=e=>h.value.studentId=e),placeholder:"请输入用户名"},null,8,["modelValue"]),d(V,null,{default:o((()=>[n("密码：")])),_:1}),d(b,{type:"password",modelValue:h.value.password,"onUpdate:modelValue":s[1]||(s[1]=e=>h.value.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),d(k,{class:"submit-btn",onClick:s[2]||(s[2]=e=>h.value.studentId?h.value.password?void p({url:`http://localhost:3000/users?studentId=${h.value.studentId.trim()}&password=${h.value.password}`,method:"GET",data:h.value,success:e=>{200===e.statusCode?(e.data[0],c({url:`/pages/home?studentId=${h.value.studentId.trim()}`}),r({title:"登录成功",icon:"success"}),w.value.close()):r({title:"用户名或密码错误",icon:"none"})},fail:()=>{r({title:"网络异常，请重试",icon:"none"}),console.log("失败")},complete:()=>{console.log("完成")}}):(r({title:"请输入密码",icon:"none"}),void console.log("密码")):(r({title:"请输入用户名",icon:"none"}),void console.log("账号")))},{default:o((()=>[n("登录")])),_:1}),d(k,{class:"submit-btn",onClick:s[3]||(s[3]=e=>{c({url:"/pages/register"})})},{default:o((()=>[n("注册")])),_:1})])),_:1})])),_:1})])),_:1},512)}}},[["__scopeId","data-v-7a3015fd"]]);export{w as default};
